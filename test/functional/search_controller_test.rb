require 'test_helper'

class SearchControllerTest < ActionController::TestCase

  test "new search page at /search" do
    get :new
    assert_response :success
  end

  test "search all page at /search/organizers/all" do
    get :all, params: { query: 'organizers' }
    assert_response :success
    assert_not_nil assigns(:tagnames)
    assert_not_nil assigns(:users)
    assert_not_nil assigns(:nodes)
    assert_equal nodes(:organizers).id, assigns(:nodes).first.id
  end

  test "search all page for no results at /search/somethingthathasnoresults/all" do
    get :all, params: { query: 'somethingthathasnoresults' }
    assert_response :success
    assert_not_nil assigns(:tagnames)
    assert_not_nil assigns(:users)
    assert_equal [], assigns(:nodes)
  end
end
